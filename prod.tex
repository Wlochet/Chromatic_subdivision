% EJC papers *must* begin with the following two lines.
\documentclass[10pt]{article}
\usepackage{fullpage}


% Please remove all other commands that change parameters such as
% margins or pagesizes.

% only use standard LaTeX packages
% only include packages that you actually need

% we recommend these ams packages
\usepackage{amsthm,amsmath,amssymb}
\usepackage{algorithm2e}
\newcommand{\qedclaim}{\hfill $\diamond$ \medskip}
\newenvironment{proofclaim}{\noindent{\em Proof of the claim.}}{\qedclaim}

% we recommend the graphicx package for importing figures
%\usepackage{graphicx}

% use this command to create hyperlinks (optional and recommended)
\usepackage[colorlinks=true,citecolor=black,linkcolor=black,urlcolor=blue]{hyperref}

% use these commands for typesetting doi and arXiv references in the bibliography
\newcommand{\doi}[1]{\href{http://dx.doi.org/#1}{\texttt{doi:#1}}}
\newcommand{\arxiv}[1]{\href{http://arxiv.org/abs/#1}{\texttt{arXiv:#1}}}

% all overfull boxes must be fixed;
% i.e. there must be no text protruding into the margins


% declare theorem-like environments
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{claim}[theorem]{Claim}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{open}[theorem]{Open Problem}
\newtheorem{problem}[theorem]{Problem}
\newtheorem{question}[theorem]{Question}

\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{note}[theorem]{Note}

\usepackage{thm-restate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% if needed include a line break (\\) at an appropriate place in the title

\title{Some paths and chromatic number}



\begin{document}



\begin{definition}
Let $k_1,k_2,k_3$ be positive integers. Let $P(k_1,k_2;k_3)$ be the digraph formed by three internally disjoint paths between two vertices $x,y$, two $(x,y)$-dipaths, one of size at least $k_1$, the other of size at least $k_2$, and one $(y,x)$-dipath of size at least $k_3$.
When we want to insist on the vertices $x$ and $y$, we denote it by $P_{xy}(k_1,k_2;k_3)$.
\end{definition}




\section{$P(k,1;k)$}

\begin{theorem}
Let $D$ be a sc digraph. If $\chi(D) > ?$ then $D$ contains a subdvision of $P(k,1;k)$
\end{theorem}

Let $\mathcal{C}$ be a collection a dicycle, such that $\forall$ $C_1$, and $C_2$ in $\mathcal{C}$, $C_1$ and $C_2$ intersect on 
a directed path $P_{1,2}$, such that $P_{1,2}$ is a subpath of both $C_1$ and $C_2$ of length smaller than $k$.
Let $D[\mathcal{C}]$ be the graph induced on $D$ by the vertices in $\mathcal{C}$.

\begin{claim}\label{DC}
$\chi(D[\mathcal{C}]) < ? $
\end{claim}

Let $D'$ be the subgraph of $D[\mathcal{C}]$ that contains only the edges inside a cycle of  $\mathcal{C}$.


\begin{claim}
There exists a proper colouring $c$ of $D'$ with $4k^2 + 9k$ colours, such that, each subpath of length $3k$ of each cycle of $\mathcal{C}$ is rainbow coloured. 
\end{claim}

Let $C_1$ be an element of $\mathcal{C}$ and $I(C_1)$ be the set of vertices of cycle $C_i$ which intersect $C_1$, which are at distance $4k$ 
of $C_1$ on $C_i$ (before or after). For each connected component $A$ 
of $D'\setminus I(C_1)$, let $E(A)$ be the union of cycle of $\mathcal{C}$ which contains a vertex of $A$. 


\begin{lemma}\label{A}
All vertices of $E(A) \setminus A$ belongs to a single cycle $C_A$ of $\mathcal{C}$.
\end{lemma}

\begin{proof}

Suppose it's not the case. Let $C_2$ and $C_3$ be two cycles of $E(A)$ such that $C_2$ and $C_3$ intersect with $C_1$. 
In $A$ $C_2$ is reduced to a directed path between $u_1$ and $u_2$ and $C_3$ a directed path between $v_1$ and $v_2$.
Because the intersection of these two cycles is shorter than $k$ and the part on $C_3$ from $v_2$ to $v_1$ and the part
on $C_2$ from $u_2$ to $u_1$ are longer than $4k$ we are in one of the following case:
\begin{itemize}
	\item There exists a vertex $x$, either belonging to $C_1$ or $C_2$ and $C_3$, with two disjoint dipath $P_1$ from
	$x$ to $u_1$ and $P_2$ from $x$ to $v_1$, longer than $k$. Then there exists a directed path $P(u,v)$ in $A$ from 
	a vertex $u$ of $C_2$ to a vertex $v$ of $C_3$ which is internally disjoint from  $C_2$, $C_3$ and $C_1$ 
	(note that it can be so that $u$ = $v$). Now the following three disjoint paths are a subdivision of $P(k,1,k)$ between $x$ and $v$:
	First, the union of $P_1$, the subpath of $C_2$ from $u_1$ to $u$ and $P(u,v)$ which is longer than $k$, then the path from $v$ to $u$ 
	along $C_3$ and $C_1$ which is also longer than $k$ and then the union of $P_2$ and the subpath of $C_3$ from $v_1$ to $v$, which is also longer than $k$.
	\item There exists a vertex $x$ either belonging to $C_1$ or $C_2$ and $C_3$, with two disjoint dipath $P_1$ from
	$u_2$ to $x$ and $P_2$ from $v_2$ to $x$, longer than $k$. This case is symmetric. 
\end{itemize}

\end{proof}


We will need the following lemmas: 
\begin{lemma}\label{walk}
Let $D$ be a digraph and $W$ a walk of length $t^l$ such that every vertex appears at most $t$ times.
Then there exists a dipath of length $l$ starting with the first vertex of $W$.
\end{lemma}

\begin{proof}
We do it by induction on $l$. Let $x$ be the first vertex of $W$, because $x$ appears at most $t$ times, there exists a subpath of length greater 
than $t^l/t$ not containing $x$. If we apply induction to the longest of such path, then we find a path of length $l-1$ without $x$ such that
 the first vertex is an out-neighbour of $x$.  

\end{proof}

\begin{lemma}\label{min}
Let $u_t$ be a sequence of $t > l^k$ integer in $[k]$ then there exists a set $L$ of $l$ of indices such that $u_i$ for $i \in L$ have the same value 
and the elements in between have greater value. 
\end{lemma}

\begin{proof}
We do it by induction on $k$. Let $L_1$ be the indices of the sequence where the value is $1$. If $L_1$ has more than $l$ elements we are done,
else we find a subsequence of $l^k/l$ consecutive elements without any $1$ and we can apply induction. 
\end{proof} 

\begin{lemma}\label{max}
Let $u_t$ be a sequence of $t > k*m$ integer in $[k]$, then there exists a subsequence of size $m$ consecutive integer such that the 
last is the largest.
\end{lemma}

\begin{proof}
By induction on $k$. For $k = 1$, it's easy. 
If there exists an element of the sequence $u_i = k$ for $i \geq m$ then take the $i$ first element of the sequence.
If not, take the subsequence starting after the last element of value $k$, it's length is at least $k*m - m$ and we can apply induction. 
\end{proof}

\begin{lemma}\label{IC}
Let $c$ be a partial colouring of $C_1$ such that only a path of length smaller than
$9k$ is coloured and this path is rainbow coloured. Then $c$ can be extended into
a colouring of $D[I(C_1)]$ using $4k^2 + 9k$ colours, such that on all cycles but $C_1$ at most a path of length $9k$ is
coloured and this colouration is rainbow.
\end{lemma}

\begin{proof}
Since $D[C_1]$ is 2k-degenerate, we can easily extend $c$ to colour $D[C_1]$ such that every path of length $9k$ is rainbow coloured. 
We will colour the other vertices with  new colours, but before we complete each maximal subdipath of $C_i \setminus C_1$ into transitive tournament
(by doing this we ensure that the colouring we obtain is rainbow where we want it). We call the arcs added that way the \textit{fake arcs}  
For each vertex $x$ of $I(C_1)$ which is not on $C_1$ we say $x$ is at distance $i$
of $C_1$ if $x$ is on cycle $C_j$ which intersect $C_1$ and the path from $x$ to $C_1$ on $C_j$ is $i$
(note that $x$ can have many distances, if it belongs to different cycles). Call $D_1$ the graph where we remove $C_1$ from $D[I(C_1)]$ and add the fake
edge.

\begin{claim}
$\chi(D_1) < a lot$ 
\end{claim}

\begin{proof}
It's not, then there exists a path of length ?. 
For each vertex $v$ we will associate a set of integer $V_d$ as following. If $v \in C_i \cap C_1$ then we put $j$ in $V_d$ if the distance
from the last vertex of $P_{1,i}$ to $v$ on $C_i$ is $j$, when $i$ is after $P_{1,j}$. If  $i$ is before $P_{1,j}$ we put $-j$ if $j$ is the distance from
$v$ to the first vertex of $P_{1,j}$. 
First note that the integer in $V_d$ are either all positive or negative. A FAIRE. 
Suppose now the set of vertices with positives $V_d$ has chromatic number greater than ?. This means there exists a path of length ?. This means,
if we replace all fake arcs by the subpath of the cycle corresponding, we get a Walk of length greater than ?, where each vertex appears at most
$4k$ times. By applying \ref{walk} we obtain a path $P$ of length $t$ with only real arcs. By considering the smallest integer in $V_d$ for each vertex
of $P$ we obtain a sequence of integer in $[4k]$ of length. 
By applying lemma \ref{min} we get a set $L = l_1 \dots L_{s+1}$ of vertices of $P$ of size $?$ such that these 
vertices have the same minimum integer in $V_d$ and the vertices inbetween have greater minimum integer in $V_d$. 
Now consider the following sequence of integer : $u_1 .. u_s$ where $u_i$ is the highest integer present in $V_d$ for $v \in [l_i .. l_{i+1} - i]$. 
By applying \ref{max} to this sequence we get a sequence of size $2k$ $u_{j_1} \dots u_{j_{2k-1}}$ such that $u_{j_{2k-1}}$ is the greatest.
Let $P'$ be the subpath on $P$ between $l_{j_1}$ and the vertex $x_f$ after $l_{j_{2k-1}}$ which gives the value to $u_{j_{2k-1}}$, moreover let $P_1$ 
be the path from $x_1 \in C_1$ to $l_{j_1}$ of length corresponding to the minimum value of $dis(l_{j_1})$, $P_2$ the one for the minimum 
value of $dis(l_{j_k})$ between $x_2 \in C_1$ and $l_{j_k}$, and $P_3$ the path from $x_f$ to $x_3 \in C_1$ on the cycle which correspond to the 
value of $u_{j_{2k-1}}$ (some of these vertices will be outside $I(C_1)$. Note that any vertex $v$ on $P_1$ and $P_2$ has an integer in $dis(v)$ 
which is smaller than $(l_{j_k})$ and any vertex $v$ on $P_3$ has an integer in $dis(v)$ which is greater than $u_{j_{2k-1}}$. This means 
$P_1$, $P_2$ and $P_3$ are disjoint from $P'$. Let $P'_1$ be the subdipath of $P'$ from $l_{j_1}$ to $l_{j_k}$ and  $P'_2$ the rest
(note that they both are longer than $k$). 
We distinguishes between the intersection of $P_1$, $P_2$ and $P_3$:

\begin{itemize}
	\item Suppose $P_3$ intersect neither $P_1$ nor $P_2$.
	\begin{enumerate}
		\item f $P_1$ and $P_2 $ are not disjoints, 
		then let $u$ be the last vertex on which they intersect. We find the subdivision of $P(k,1;k)$ between $u$ and $l_{j_k}$. 
		The first path is from $u$ to $x_{j_k}$ along $P_1$ then $P'_1$, the second is from $x_{j_k}$ to $u$ using $P'_2$, then $P_3$ then the path along $C_1$ 
		then $P_1$ to go to $u$ the last is the path from $u$ to $x_{j_k}$ along $P_2$.
		\item 	If $P_1$ and $P_2$ are disjoint. If $c_1$ is between $c_2$ and $c_3$ along the cycle $C_1$, then we find the subdivision of $P(k,1;k)$
		between $c_1$ and $l_{j_p}$. The first path is $P_1 \cdot P'_1$, the second is $P'_2 \cdot P_3$ 
		then the path along $C_1$ from $c_3$ to $c_1$ and the third
	is the path along $C_1$ from $c_1$ to $c_2$ then $P_2$. If $c_1$ is after $c_2$ then we find the subdivision of $P(k,1;k)$ between $c_2$ and 
	$l_{j_k} $. The first path is the path along $C_1$ from $c_2$ to $c_1$, then $P_2$ then $P'_1$. Then second is $P'_2 \cdot P_3$ then the path along $C_1$ from
	$c_3$ to $c_2$ and the third is $P_3$. 
\end{enumerate}
	\item If $P_3$ intersect first a vertex $v \in P_1 \cap P_2$ then it's like last case where $P_1$ and $P_2$ intersect.
	\item Suppose $P_3$ intersects first $P_2$. Let $u$ be the last vertex of $P_3$ which is on $P_2$ before it goes to either $P_1$ or to $C_1$.
	We find a subdivision of $P(k,1;k)$ between $l_{j_k}$ and $u$. The first path is $P'_2$ then $P_3$ until $u$, the second is the path from $u$ to $P_1$ (either going
	through $C_1$ or not) then along $P_1$ until $l_{j_1}$ then $P'_1$, the last is from $u$ to $l_{j_k}$ along $P_1$.
	\item Suppose $P_3$ intersects first $P_1$. Let $u$ be the last vertex of $P_3$ which is on $P_1$ before it goes to either $P_2$ or to $C_1$.
	We find a subdivision of $P(k,1;k)$ between $l_{j_k}$ and $u$. The first path is $P'_2$ then $P_3$ until $u$, the second is the path from $u$ to
	$l_{j_1}$ along $P_1$ then $P'_1$, the third is from $u$ to $P_2$ using $P_3$ and $C_1$ if necessary then the path along $P_2$ to  $l_{j_k}$.
\end{itemize} 


\end{proof}
%If $x$ is before $C_1$ we say $i$ is positive and $i$ is negative otherwise. Let $D_i$, be digraph induced by the set of vertices at distance $i$, positive, of $C_1$, then
%$\chi(D_i) < k$. Suppose not then we can find a dipath $P$ of length $k$ inside $D_i$ $x_1,x_2, \dots x_k$. By definition there two cycles
%$C_2$, $C_3$, such that $x_1$ is on $C_2$ and $x_k$ on $C_3$. Consider the three paths $P_2 \subset C_2$ from $c_1 \in C_1$ to $x_1$
%disjoint, apart in $c_1$, from $C_1$, $P_3 \subset C_k$ from $c_p \in C_1$ to $x_p$ disjoint, apart in $c_p$, from $C_1$ and $P_4 \subset C_k$ from $x_p$ to $c_p^{'} \in C_1$, disjoint from $C_1$ apart from $c_p$. We find the subdivision of $P(k,1;k)$, as follow :
%
%If $P_2$ and $P_3$ are not disjoints, then let $u$ be the last vertex on which they intersect (note that $x_1$ and $x_k$ are different).
%We find the subdivision of $P(k,1;k)$ between $u$ and $x_k$. The first path is $u$ to $x_1$ along $P_2$ then $P$, the second one is the
%path from $x_k$ to $u$ along $C_k$ and the third is the path from $u$ to $x_p$ along $C_k$.
%
%If $P_2$ and $P_3$ are disjoint. If $c_1$ is between $c_p{'}$ and $c_p$ along the cycle $C_1$, then we find the subdivision of $P(k,1;k)$
%between $c_1$ and $x_p$. The first path is $P_2 \cdot P$, the second is $P_4$ then the path along $C_1$ from $c_p^{'}$ to $c_1$ and the third
%is the path along $C_1$ from $c_1$ to $c_p$ then $P_3$. If $c_1$ is after $c_p$ then we find the subdivision of $P(k,1;k)$ between $c_p$ and 
%$x_p$. The first path is the path along $C_1$ from $c_p$ to $c_1$, then $P_2$ then $P$. Then second is $P_4$ then the path along $C_1$ from
%$c_p^{'}$ to $c_p$ and the third is $P_3$. 

The argument is the same when $i$ is negative, and thus the rest of $I(C_1)$ can be coloured with ? colours. 
\end{proof}

Now we can prove by induction on the number of cycle in $\mathcal{C}$ that if one of the cycle $C_1$ has a path of length smaller than $9k$
which is rainbow coloured, then we can extend this colouring to all $D[\mathbb{C}]$ such that, on each cycle, every subdipath of length
$9k$ is rainbow coloured. By lemma \ref{IC}, we can extend this colouring to a colouring $c$ of $D[I(C_1)]$.
 Note that the remaining points of $D[\mathbb{C}]$ are in the connected components of $D'\setminus I(C_1)$. 
Let $A$ be a connected component of $D'\setminus I(C_1)$, by lemma \ref{A} if we give the colours of $c$ to vertices of $E(A) \cap I(C_1)$
only a path of length smaller than $9k$ receive some colours, so we can apply the induction hypothesis to all $E(A)$ to get a colouring
of the vertices of $A$ which is compatible with $c$. By doing this to each component, we finish the proof.


\medskip	

%Now it remains to colour the edges between cycles of $\mathcal{C}$ in each connected component.
%Let $C_r$ be a cycle of $\mathcal{C}$. We let $L_1$ be the set of cycle of $\mathcal{C}$ which intersect 
%$C_1$. For each cycle $L_1$ of 
%
%
%For each cycle $C_i$ in the same component as $C_2$, there exists a
%sequence of cycle $C_1 = C_r$ $C_2$, $\dots C_l = C_i$ such that, for all $j$, $C_j$ qnd $C_{j+1}$ intersect on an non empty path.
%We can assume this sequence is the shortest possible, and this define a distance between $C_r$ and $C_i$.
%We will colour the set of vertices who belongs to a cycle at distance $i$ of $C_r$.
%
%\begin{lemma}
%Let $C_i$ and $C_j$ be two cycles at distance $l$ of $C_r$ and $C_{i'}$ and $C_{j'}$ be the cycle preceding $C_i$ and $C_j$ on their path to $C_r$.
%Suppose $P_{i,i'}$ and $P_{j,j'}$ are disjoint.
%There exists a path from the last vertex of $P_{i,i'}$ to the first vertex of $P_{j,j'}$ and one from the first vertex of $P_{j,j'}$ to the last of
%$P_{i,i'}$ . One of these path is of size greater than $k$ and they only uses vertices of cycle at distance less than $l$ of $C_r$. 
%\end{lemma}
%
%\begin{proof}
%flemme
%\end{proof}




 
\end{document}
